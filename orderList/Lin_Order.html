<!DOCTYPE html>
<html>
<head>
<title>Edit Order</title>
<link rel="stylesheet" type="text/css" href="../css/backstore.css">
<script>
function validateForm() {
  var x = document.forms["myForm"]["fname"].value;
  if (x == "") {
    alert("Customer name must be filled out!");
    return false;
  }
  if(x.match(/[0-9]/)){
      alert("Customer name cannot contain any numbers!")
      return false;
  }
  x = document.forms["myForm"]["fnum"].value;
  if (x == "") {
    alert("Order number must be filled out!");
    return false;
  }
  if (!x.match(/\d\d\d-\d\d\d\d\d/)) {
    alert("Please check! Format of the order number is incorrect!");
    return false;
  }
  x = document.forms["myForm"]["detail"].value;
  if (x == "") {
    alert("Order detail must be filled out!");
    return false;
  }
  x = document.forms["myForm"]["total"].value;
  if (x == "") {
    alert("Total amount of money must be given!");
    return false;
  }
  if (!x.match(/[0-9]/)) {
    alert("Total amount of money has to be a number!");
    return false;
  }
}

window.onbeforeunload = function(){
  localStorage.setItem("names", document.getElementById("name").value);
  localStorage.setItem("orderNumber", document.getElementById("orderNum").value);
  localStorage.setItem("details", document.getElementById("detail").value);
  localStorage.setItem("totalA", document.getElementById("total").value);
  localStorage.setItem("extranotes", document.getElementById("extranote").value);
}

window.onload = function(){
  var name = localStorage.getItem("names");
  if(name != null){
    document.getElementById("name").value = localStorage.getItem("names");
  }
  var name = localStorage.getItem("orderNumber");
  if(name != null){
    document.getElementById("orderNum").value = localStorage.getItem("orderNumber");
  }
  var name = localStorage.getItem("details");
  if(name != null){
    document.getElementById("detail").value = localStorage.getItem("details");
  }
  var name = localStorage.getItem("totalA");
  if(name != null){
    document.getElementById("total").value = localStorage.getItem("totalA");
  }
  var name = localStorage.getItem("extranotes");
  if(name != null){
    document.getElementById("extranote").value = localStorage.getItem("extranotes");
  }
}
</script>
</head>
<body>

<div class="header">
    <h1>Edit Order</h1>
    <hr/>
</div> 

<form name="myForm" action="/action_page.php" onsubmit="return validateForm()" method="post">
  Customer Name: <br><input type="text" name="fname" size="50" value="Shiyu Lin" id="name"><br><br>
  Order Number: <br><input type="text" name="fnum" size="50" value="008-93238" id="orderNum"><br><br>
  Order Detail: <br><input type="text" name="detail" size="50" style="height:200px;" value="Boneless Chicken Breasts--2  
  Boneless European cut bottom blade roast--900g" id="detail"><br><br>
  Total (in Canadian dollar):  <br><input type="text" name="total" size="50" value="68.08" id="total"><br><br> 
  Extra information: <br><textarea id="notes" name="notes" rows="4" cols="50" id="extranote"></textarea><br><br>


  <input type="submit" value="Submit">
</form>

</body>
</html>